{"version":3,"sources":["../../component/lib/Context.js","../../component/lib/sleep.js","../../component/lib/SayPrimitive.js","../../component/lib/Say.js","../../component/lib/index.js","../../component/lib/Utterance.js","../../component/lib/createDeferred.js","../../component/lib/retry.js","../../component/lib/spinWaitUntil.js","../../component/lib/timeout.js","../../component/lib/SayButton.js","App.js","registerServiceWorker.js","index.js","../../component/lib/Composer.js"],"names":["Object","defineProperty","exports","value","obj","_react","__webpack_require__","Context","__esModule","default","createContext","_promise","_promise2","ms","arguments","length","undefined","resolve","setTimeout","_extends3","_interopRequireDefault","_regenerator2","_asyncToGenerator3","_getPrototypeOf2","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_propTypes2","_react2","_Context2","SayPrimitive","_React$Component","props","this","_this","__proto__","call","handleBoundary","bind","handleEnd","handleError","handleStart","state","id","Date","now","Math","random","key","unmounted","context","cancel","catch","err","event","onBoundary","onEnd","onError","onStart","nextProps","speak","_this2","mark","_callee","_props","lang","pitch","rate","text","voice","volume","wrap","_context","prev","next","stop","console","error","Component","SayPrimitiveWithContext","createElement","Consumer","children","propTypes","string","number","func","oneOfType","any","_Composer2","_SayPrimitive2","Say","speechSynthesis","speechSynthesisUtterance","defaultProps","window","webkitSpeechSynthesis","SpeechSynthesisUtterance","webkitSpeechSynthesisUtterance","SayButton","Composer","_Say2","_SayButton2","_createDeferred2","_retry2","_sleep2","_spinWaitUntil2","_timeout2","createNativeUtterance","utteranceLike","ponyfill","_utteranceLike$pitch","_utteranceLike$rate","_utteranceLike$volume","utterance","targetVoice","getVoices","voiceURI","find","slice","v","addEventListener","Utterance","cancelled","deferred","speaking","promise","_speak","then","type","reject","_ref2","_callee2","startDeferred","errorDeferred","endDeferred","endEvent","_context2","Error","race","t0","artificial","sent","_x","apply","promiseResolve","promiseReject","_ref","fn","numRetries","interval","lastError","times","abrupt","_x2","_x3","predicate","_","handleClick","busy","onClick","setState","disabled","SayButtonWithContext","ROOT_CSS","css","display","& > section","flex","SEGMENTS","_default","classCallCheck","possibleConstructorReturn","getPrototypeOf","handleAddClick","assertThisInitialized","handleBingSpeechKeyChange","handleBingSpeechKeySubmit","handleClearBingSpeechKey","handleRemoveFromQueue","handleSayEnd","handleSelectedVoiceChange","bingSpeechKey","URLSearchParams","location","search","get","speechToken","SubscriptionKey","queued","selectedVoiceURI","toConsumableArray","concat","target","preventDefault","href","encodeURIComponent","targetID","_ref3","filter","_ref4","_ref5","react_default","a","component_lib","_ref6","voices","className","map","segment","role","aria-label","_ref7","_ref8","navigator","language","_ref9","_ref10","_ref11","component_lib_default","_ref12","_ref13","onChange","_ref14","name","onSubmit","React","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","ReactDOM","render","App_default","document","getElementById","URL","process","origin","fetch","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","_toConsumableArray3","_memoizeOne2","_Utterance2","SpeechContext","queueWithCurrent","cancelAll","setPonyfill","index","findIndex","_next","handleVoicesChanged","mergeContext","some","removeEventListener","nextVoices","_this3","Provider"],"mappings":"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","file":"static/js/main.45254e97.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar Context = _react2.default.createContext();\n\nexports.default = Context;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nexports.default = function () {\n  var ms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n  return new _promise2.default(function (resolve) {\n    return setTimeout(resolve, ms);\n  });\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Context = require('./Context');\n\nvar _Context2 = _interopRequireDefault(_Context);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar SayPrimitive = function (_React$Component) {\n  (0, _inherits3.default)(SayPrimitive, _React$Component);\n\n  function SayPrimitive(props) {\n    (0, _classCallCheck3.default)(this, SayPrimitive);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (SayPrimitive.__proto__ || (0, _getPrototypeOf2.default)(SayPrimitive)).call(this, props));\n\n    _this.handleBoundary = _this.handleBoundary.bind(_this);\n    _this.handleEnd = _this.handleEnd.bind(_this);\n    _this.handleError = _this.handleError.bind(_this);\n    _this.handleStart = _this.handleStart.bind(_this);\n    _this.state = {\n      id: Date.now() + Math.random()\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(SayPrimitive, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      // TODO: Should dequeue self on unmount\n      this.unmounted = true;\n      this.props.context.cancel(this.state.id).catch(function (err) {\n        return 0;\n      });\n    }\n  }, {\n    key: 'handleBoundary',\n    value: function handleBoundary(event) {\n      !this.unmounted && this.props.onBoundary && this.props.onBoundary(event);\n    }\n  }, {\n    key: 'handleEnd',\n    value: function handleEnd(event) {\n      !this.unmounted && this.props.onEnd && this.props.onEnd(event);\n    }\n  }, {\n    key: 'handleError',\n    value: function handleError(event) {\n      !this.unmounted && this.props.onError && this.props.onError(event);\n    }\n  }, {\n    key: 'handleStart',\n    value: function handleStart(event) {\n      !this.unmounted && this.props.onStart && this.props.onStart(event);\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      return nextProps.speak !== this.props.speak;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      (0, _asyncToGenerator3.default)(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee() {\n        var _props, context, lang, pitch, rate, text, voice, volume, id;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _props = _this2.props, context = _props.context, lang = _props.lang, pitch = _props.pitch, rate = _props.rate, text = _props.speak, voice = _props.voice, volume = _props.volume;\n                id = _this2.state.id;\n                context.speak({\n                  id: id,\n                  lang: lang,\n                  onBoundary: _this2.handleBoundary,\n                  onEnd: _this2.handleEnd,\n                  onError: _this2.handleError,\n                  onStart: _this2.handleStart,\n                  pitch: pitch,\n                  rate: rate,\n                  text: text,\n                  voice: voice,\n                  volume: volume\n                });\n\n              case 3:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2);\n      }))().catch(function (err) {\n        return console.error(err);\n      });\n      return false;\n    }\n  }]);\n  return SayPrimitive;\n}(_react2.default.Component);\n\nvar SayPrimitiveWithContext = function SayPrimitiveWithContext(props) {\n  return _react2.default.createElement(_Context2.default.Consumer, null, function (context) {\n    return _react2.default.createElement(SayPrimitive, (0, _extends3.default)({\n      context: context\n    }, props), props.children);\n  });\n};\n\nSayPrimitiveWithContext.propTypes = {\n  lang: _propTypes2.default.string,\n  pitch: _propTypes2.default.number,\n  rate: _propTypes2.default.number,\n  onBoundary: _propTypes2.default.func,\n  onEnd: _propTypes2.default.func,\n  onError: _propTypes2.default.func,\n  onStart: _propTypes2.default.func,\n  speak: _propTypes2.default.string,\n  voice: _propTypes2.default.oneOfType([_propTypes2.default.any, _propTypes2.default.func]),\n  volume: _propTypes2.default.number\n};\nexports.default = SayPrimitiveWithContext;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Composer = require('./Composer');\n\nvar _Composer2 = _interopRequireDefault(_Composer);\n\nvar _SayPrimitive = require('./SayPrimitive');\n\nvar _SayPrimitive2 = _interopRequireDefault(_SayPrimitive);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar Say = function Say(props) {\n  return _react2.default.createElement(_Composer2.default, {\n    speechSynthesis: props.speechSynthesis,\n    speechSynthesisUtterance: props.speechSynthesisUtterance\n  }, _react2.default.createElement(_SayPrimitive2.default, {\n    lang: props.lang,\n    onBoundary: props.onBoundary,\n    onEnd: props.onEnd,\n    onError: props.onError,\n    onStart: props.onStart,\n    pitch: props.pitch,\n    rate: props.rate,\n    speak: props.speak,\n    voice: props.voice,\n    volume: props.volume\n  }, props.children));\n};\n\nSay.defaultProps = {\n  speechSynthesis: window.speechSynthesis || window.webkitSpeechSynthesis,\n  speechSynthesisUtterance: window.SpeechSynthesisUtterance || window.webkitSpeechSynthesisUtterance\n};\nSay.propTypes = {\n  lang: _propTypes2.default.string,\n  onBoundary: _propTypes2.default.func,\n  onEnd: _propTypes2.default.func,\n  onError: _propTypes2.default.func,\n  onStart: _propTypes2.default.func,\n  pitch: _propTypes2.default.number,\n  rate: _propTypes2.default.number,\n  speechSynthesis: _propTypes2.default.any,\n  speechSynthesisUtterance: _propTypes2.default.any,\n  speak: _propTypes2.default.string,\n  voice: _propTypes2.default.oneOfType([_propTypes2.default.any, _propTypes2.default.func]),\n  volume: _propTypes2.default.number\n};\nexports.default = Say;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SayPrimitive = exports.SayButton = exports.Context = exports.Composer = undefined;\n\nvar _Say = require('./Say');\n\nvar _Say2 = _interopRequireDefault(_Say);\n\nvar _Composer = require('./Composer');\n\nvar _Composer2 = _interopRequireDefault(_Composer);\n\nvar _Context = require('./Context');\n\nvar _Context2 = _interopRequireDefault(_Context);\n\nvar _SayButton = require('./SayButton');\n\nvar _SayButton2 = _interopRequireDefault(_SayButton);\n\nvar _SayPrimitive = require('./SayPrimitive');\n\nvar _SayPrimitive2 = _interopRequireDefault(_SayPrimitive);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = _Say2.default;\nexports.Composer = _Composer2.default;\nexports.Context = _Context2.default;\nexports.SayButton = _SayButton2.default;\nexports.SayPrimitive = _SayPrimitive2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _createDeferred = require('./createDeferred');\n\nvar _createDeferred2 = _interopRequireDefault(_createDeferred);\n\nvar _retry = require('./retry');\n\nvar _retry2 = _interopRequireDefault(_retry);\n\nvar _sleep = require('./sleep');\n\nvar _sleep2 = _interopRequireDefault(_sleep);\n\nvar _spinWaitUntil = require('./spinWaitUntil');\n\nvar _spinWaitUntil2 = _interopRequireDefault(_spinWaitUntil);\n\nvar _timeout = require('./timeout');\n\nvar _timeout2 = _interopRequireDefault(_timeout);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction createNativeUtterance(utteranceLike, ponyfill) {\n  var speechSynthesis = ponyfill.speechSynthesis,\n      SpeechSynthesisUtterance = ponyfill.SpeechSynthesisUtterance;\n  var lang = utteranceLike.lang,\n      onBoundary = utteranceLike.onBoundary,\n      _utteranceLike$pitch = utteranceLike.pitch,\n      pitch = _utteranceLike$pitch === undefined ? 1 : _utteranceLike$pitch,\n      _utteranceLike$rate = utteranceLike.rate,\n      rate = _utteranceLike$rate === undefined ? 1 : _utteranceLike$rate,\n      text = utteranceLike.text,\n      voice = utteranceLike.voice,\n      _utteranceLike$volume = utteranceLike.volume,\n      volume = _utteranceLike$volume === undefined ? 1 : _utteranceLike$volume;\n  var utterance = new SpeechSynthesisUtterance(text);\n  var targetVoice = void 0;\n\n  if (typeof voice === 'function') {\n    targetVoice = voice.call(speechSynthesis, speechSynthesis.getVoices());\n  } else {\n    var _ref = voice || {},\n        voiceURI = _ref.voiceURI;\n\n    targetVoice = voiceURI && [].find.call([].slice.call(speechSynthesis.getVoices()), function (v) {\n      return v.voiceURI === voiceURI;\n    });\n  } // Edge will mute if \"lang\" is set to \"\"\n\n\n  utterance.lang = lang || '';\n\n  if (utterance.pitch || utterance.pitch === 0) {\n    utterance.pitch = pitch;\n  }\n\n  if (utterance.rate || utterance.rate === 0) {\n    utterance.rate = rate;\n  } // Cognitive Services will error when \"voice\" is set to \"null\"\n  // Edge will error when \"voice\" is set to \"undefined\"\n\n\n  if (targetVoice) {\n    utterance.voice = targetVoice;\n  }\n\n  if (utterance.volume || utterance.volume === 0) {\n    utterance.volume = volume;\n  }\n\n  if (utterance.addEventListener) {\n    if (onBoundary) {\n      utterance.addEventListener('boundary', onBoundary);\n    } // Since browser quirks, start/error/end events are emulated for best compatibility\n\n  }\n\n  return utterance;\n}\n\nvar Utterance = function () {\n  function Utterance(utteranceLike) {\n    (0, _classCallCheck3.default)(this, Utterance);\n    this.cancelled = false;\n    this.deferred = (0, _createDeferred2.default)();\n    this.id = utteranceLike.id;\n    this.speaking = false;\n    this.utteranceLike = utteranceLike;\n  }\n\n  (0, _createClass3.default)(Utterance, [{\n    key: 'cancel',\n    value: function cancel() {\n      this.cancelled = true;\n      this.speaking && this.ponyfill.speechSynthesis.cancel();\n      return this.deferred.promise;\n    }\n  }, {\n    key: 'speak',\n    value: function speak(ponyfill) {\n      var _this = this;\n\n      this._speak(ponyfill).then(function () {\n        _this.utteranceLike.onEnd && _this.utteranceLike.onEnd({\n          type: 'end'\n        });\n\n        _this.deferred.resolve();\n      }, function (error) {\n        _this.utteranceLike.onError && _this.utteranceLike.onError({\n          type: 'error',\n          error: error\n        });\n\n        _this.deferred.reject(error);\n      });\n\n      return this.deferred.promise;\n    }\n  }, {\n    key: '_speak',\n    value: function () {\n      var _ref2 = (0, _asyncToGenerator3.default)(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee2(ponyfill) {\n        var _this2 = this;\n\n        var speechSynthesis, utterance, startDeferred, errorDeferred, endDeferred, endEvent;\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!this.cancelled) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw new Error('cancelled');\n\n              case 2:\n                this.ponyfill = ponyfill;\n                speechSynthesis = ponyfill.speechSynthesis;\n                utterance = createNativeUtterance(this.utteranceLike, ponyfill);\n                startDeferred = (0, _createDeferred2.default)();\n                errorDeferred = (0, _createDeferred2.default)();\n                endDeferred = (0, _createDeferred2.default)();\n                utterance.addEventListener('end', endDeferred.resolve);\n                utterance.addEventListener('error', errorDeferred.resolve);\n                utterance.addEventListener('start', startDeferred.resolve); // if (speechSynthesis.speaking) {\n                //   console.warn(`ASSERTION: speechSynthesis.speaking should not be truthy before we call speak`);\n                // }\n                // Chrome quirks:\n                // 1. Speak an utterance\n                // 2. Cancel in the midway\n                // 3. Speak another utterance\n                // Expected: speaking is falsy, then turn to truthy, then receive \"start\" event, and audio played\n                // Actual: speaking is falsy, then turn to truthy (which is wrong), but receive no \"start\" event, and no audio played\n                // Workaround: retry 2 times with a second\n                // Safari quirks:\n                // - Audio doesn't play if the speech is started from a user event\n                // - If no audio is played, the \"start\" event won't fire\n                // For Chrome quirks, we need a custom queue, because we need to definitely know when to expect a \"start\" event.\n                // If we don't have a queue, the \"start\" event could be happening long time later because it's still pending in the queue.\n                // But with the custom queue, the first item might be started from non-user event. That means in Safari, the first item is muted.\n                // And after the first fail, the custom queue will play the second item from a non-user event code path. That means, all subsequent\n                // items are blocked until Safari has the very first item queued from user event.\n                // console.debug(`STARTING: ${ utterance.text }`);\n\n                this.speaking = true;\n                _context2.next = 14;\n                return (0, _retry2.default)((0, _asyncToGenerator3.default)(\n                /*#__PURE__*/\n                _regenerator2.default.mark(function _callee() {\n                  return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          if (!_this2.cancelled) {\n                            _context.next = 2;\n                            break;\n                          }\n\n                          throw new Error('cancelled');\n\n                        case 2:\n                          speechSynthesis.speak(utterance);\n                          _context.prev = 3;\n                          _context.next = 6;\n                          return _promise2.default.race([startDeferred.promise, (0, _timeout2.default)(1000)]);\n\n                        case 6:\n                          _context.next = 12;\n                          break;\n\n                        case 8:\n                          _context.prev = 8;\n                          _context.t0 = _context['catch'](3); // This is required for Chrome quirks.\n                          // Chrome doesn't know it can't start speech, and it just wait there forever.\n                          // We need to cancel it out.\n\n                          speechSynthesis.cancel();\n                          throw _context.t0;\n\n                        case 12:\n                        case 'end':\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee, _this2, [[3, 8]]);\n                })), 2, 0);\n\n              case 14:\n                // console.debug(`STARTED: ${ utterance.text }`);\n                utterance.onStart && utterance.onStart({\n                  type: 'start'\n                });\n                _context2.next = 17;\n                return _promise2.default.race([errorDeferred.promise, endDeferred.promise, (0, _spinWaitUntil2.default)(function () {\n                  return !speechSynthesis.speaking;\n                }).then(function () {\n                  return (0, _sleep2.default)(500);\n                }).then(function () {\n                  return {\n                    type: 'end',\n                    artificial: true\n                  };\n                })]);\n\n              case 17:\n                endEvent = _context2.sent; // if (speechSynthesis.speaking) {\n                //   console.warn(`ASSERTION: speechSynthesis.speaking should not be truthy after speak is stopped`);\n                // }\n                // console.debug(`ENDED: ${ utterance.text }`);\n\n                this.speaking = false;\n\n                if (!(endEvent.type === 'error')) {\n                  _context2.next = 23;\n                  break;\n                }\n\n                throw endEvent.error;\n\n              case 23:\n                if (!this.cancelled) {\n                  _context2.next = 25;\n                  break;\n                }\n\n                throw new Error('cancelled');\n\n              case 25:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _speak(_x) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return _speak;\n    }()\n  }]);\n  return Utterance;\n}();\n\nexports.default = Utterance;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nexports.default = createDeferred;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction createDeferred() {\n  var reject = void 0,\n      resolve = void 0;\n  var promise = new _promise2.default(function (promiseResolve, promiseReject) {\n    reject = promiseReject;\n    resolve = promiseResolve;\n  });\n\n  if (!reject || !resolve) {\n    throw new Error('Promise is not a ES-compliant and do not run exector immediately');\n  }\n\n  return {\n    promise: promise,\n    reject: reject,\n    resolve: resolve\n  };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _sleep = require('./sleep');\n\nvar _sleep2 = _interopRequireDefault(_sleep);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function () {\n  var _ref = (0, _asyncToGenerator3.default)(\n  /*#__PURE__*/\n  _regenerator2.default.mark(function _callee(fn, numRetries, interval) {\n    var lastError, times;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            lastError = void 0;\n            times = 0;\n\n          case 2:\n            if (!(times < numRetries)) {\n              _context.next = 18;\n              break;\n            }\n\n            if (!times) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 6;\n            return (0, _sleep2.default)(interval);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return fn();\n\n          case 9:\n            return _context.abrupt('return', _context.sent);\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context['catch'](6);\n            lastError = _context.t0;\n\n          case 15:\n            times++;\n            _context.next = 2;\n            break;\n\n          case 18:\n            throw lastError;\n\n          case 19:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this, [[6, 12]]);\n  }));\n\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _sleep = require('./sleep');\n\nvar _sleep2 = _interopRequireDefault(_sleep);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function () {\n  var _ref = (0, _asyncToGenerator3.default)(\n  /*#__PURE__*/\n  _regenerator2.default.mark(function _callee(predicate, interval) {\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return (0, _sleep2.default)(500);\n\n          case 2:\n            if (predicate()) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 5;\n            return (0, _sleep2.default)(interval);\n\n          case 5:\n            _context.next = 2;\n            break;\n\n          case 7:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nexports.default = function (ms) {\n  return new _promise2.default(function (_, reject) {\n    return setTimeout(function () {\n      return reject(new Error('timed out'));\n    }, ms);\n  });\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Composer = require('./Composer');\n\nvar _Composer2 = _interopRequireDefault(_Composer);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar SayButton = function (_React$Component) {\n  (0, _inherits3.default)(SayButton, _React$Component);\n\n  function SayButton(props) {\n    (0, _classCallCheck3.default)(this, SayButton);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (SayButton.__proto__ || (0, _getPrototypeOf2.default)(SayButton)).call(this, props));\n\n    _this.handleClick = _this.handleClick.bind(_this);\n    _this.state = {\n      busy: false,\n      id: Date.now() + Math.random()\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(SayButton, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.props.context.cancel(this.state.id);\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick() {\n      var _this2 = this;\n\n      var props = this.props,\n          state = this.state;\n      props.onClick && props.onClick(event);\n      this.setState(function () {\n        return {\n          busy: true\n        };\n      }, (0, _asyncToGenerator3.default)(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee() {\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return props.context.speak({\n                  id: state.id,\n                  lang: props.lang,\n                  onBoundary: props.onBoundary,\n                  onEnd: props.onEnd,\n                  onError: props.onError,\n                  onStart: props.onStart,\n                  pitch: props.pitch,\n                  rate: props.rate,\n                  text: props.speak,\n                  voice: props.voice,\n                  volume: props.volume\n                });\n\n              case 2:\n                _this2.setState(function () {\n                  return {\n                    busy: false\n                  };\n                });\n\n              case 3:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2);\n      })));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          children = _props.children,\n          disabled = _props.disabled,\n          busy = this.state.busy;\n      return _react2.default.createElement('button', {\n        disabled: typeof disabled === 'boolean' ? disabled : busy,\n        onClick: this.handleClick\n      }, children);\n    }\n  }]);\n  return SayButton;\n}(_react2.default.Component);\n\nvar SayButtonWithContext = function SayButtonWithContext(props) {\n  return _react2.default.createElement(_Composer2.default, {\n    speechSynthesis: props.speechSynthesis,\n    speechSynthesisUtterance: props.speechSynthesisUtterance\n  }, function (context) {\n    return _react2.default.createElement(SayButton, (0, _extends3.default)({\n      context: context\n    }, props));\n  });\n};\n\nSayButtonWithContext.propTypes = {\n  lang: _propTypes2.default.string,\n  onBoundary: _propTypes2.default.func,\n  onEnd: _propTypes2.default.func,\n  onError: _propTypes2.default.func,\n  onStart: _propTypes2.default.func,\n  pitch: _propTypes2.default.number,\n  rate: _propTypes2.default.number,\n  speak: _propTypes2.default.string,\n  voice: _propTypes2.default.oneOfType([_propTypes2.default.any, _propTypes2.default.func]),\n  volume: _propTypes2.default.number\n};\nexports.default = SayButtonWithContext;","import { css } from 'glamor';\nimport React from 'react';\nimport { speechSynthesis, SpeechSynthesisUtterance, SubscriptionKey } from 'web-speech-cognitive-services';\n\nimport Say, { Composer, SayButton } from 'component';\n\nconst ROOT_CSS = css({\n  display: 'flex',\n\n  '& > section': {\n    flex: 1\n  }\n});\n\nconst SEGMENTS = [\n  'A quick brown fox',\n  'jumped over',\n  'the lazy dogs',\n  'A quick brown fox jumped over the lazy dogs.'\n];\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAddClick = this.handleAddClick.bind(this);\n    this.handleBingSpeechKeyChange = this.handleBingSpeechKeyChange.bind(this);\n    this.handleBingSpeechKeySubmit = this.handleBingSpeechKeySubmit.bind(this);\n    this.handleClearBingSpeechKey = this.handleClearBingSpeechKey.bind(this);\n    this.handleRemoveFromQueue = this.handleRemoveFromQueue.bind(this);\n    this.handleSayEnd = this.handleRemoveFromQueue.bind(this);\n    this.handleSelectedVoiceChange = this.handleSelectedVoiceChange.bind(this);\n\n    const params = new URLSearchParams(window.location.search);\n    const bingSpeechKey = params.get('s');\n    let ponyfill;\n\n    if (bingSpeechKey) {\n      ponyfill = {\n        speechSynthesis,\n        SpeechSynthesisUtterance\n      };\n\n      speechSynthesis.speechToken = new SubscriptionKey(bingSpeechKey);\n    }\n\n    this.state = {\n      bingSpeechKey,\n      ponyfill,\n      queued: [],\n      selectedVoiceURI: null\n    };\n  }\n\n  handleAddClick(text, pitch, rate) {\n    const id = Date.now() + Math.random();\n\n    this.setState(({ queued }) => ({\n      queued: [...queued, { id, pitch, rate, text }]\n    }));\n  }\n\n  handleBingSpeechKeyChange({ target: { value } }) {\n    this.setState(() => ({ bingSpeechKey: value }));\n  }\n\n  handleBingSpeechKeySubmit(event) {\n    event.preventDefault();\n    window.location.href = `?s=${ encodeURIComponent(this.state.bingSpeechKey) }`;\n  }\n\n  handleClearBingSpeechKey() {\n    this.setState(() => ({ bingSpeechKey: '' }));\n  }\n\n  handleRemoveFromQueue(targetID) {\n    this.setState(({ queued }) => ({\n      queued: queued.filter(({ id }) => id !== targetID)\n    }));\n  }\n\n  handleSelectedVoiceChange({ target: { value } }) {\n    this.setState(() => ({\n      selectedVoiceURI: value\n    }));\n  }\n\n  render() {\n    const { state } = this;\n\n    return (\n      <Composer\n        speechSynthesis={ state.ponyfill && state.ponyfill.speechSynthesis }\n        speechSynthesisUtterance={ state.ponyfill && state.ponyfill.SpeechSynthesisUtterance }\n      >\n        { ({ voices }) =>\n          <div className={ ROOT_CSS }>\n            <section className=\"words\">\n              <article>\n                <header>\n                  <h1>Words</h1>\n                </header>\n                <ul>\n                  { SEGMENTS.map(segment =>\n                    <li key={ segment }>\n                      <button onClick={ this.handleAddClick.bind(null, segment, 1, 1) }><span role=\"img\" aria-label=\"say\"></span></button>\n                      <button onClick={ this.handleAddClick.bind(null, segment, 2, 1) }><span role=\"img\" aria-label=\"high pitch\"></span></button>\n                      <button onClick={ this.handleAddClick.bind(null, segment, .5, 1) }><span role=\"img\" aria-label=\"low pitch\"></span></button>\n                      <button onClick={ this.handleAddClick.bind(null, segment, 1, 2) }><span role=\"img\" aria-label=\"fast\"></span></button>\n                      <button onClick={ this.handleAddClick.bind(null, segment, 1, .5) }><span role=\"img\" aria-label=\"slow\"></span></button>\n                      &nbsp;{ segment }\n                    </li>\n                  ) }\n                </ul>\n              </article>\n              <article>\n                <header>\n                  <h1>Say immediate</h1>\n                </header>\n                <ul>\n                  { SEGMENTS.map(segment =>\n                    <li key={ segment }>\n                      <SayButton\n                        speak={ segment }\n                        voice={ voices => voices.find(({ voiceURI }) => voiceURI === state.selectedVoiceURI) || voices.find(({ lang }) => lang === window.navigator.language) }\n                      >\n                        { segment }\n                      </SayButton>\n                    </li>\n                  ) }\n                </ul>\n              </article>\n              <article>\n                <header>\n                  <h1>Other languages</h1>\n                </header>\n                <ul>\n                  <li>\n                    <SayButton\n                      speak=\"\"\n                      voice={ voices => {\n                        const voice = voices.find(({ voiceURI }) => voiceURI === state.selectedVoiceURI);\n\n                        return (voice && voice.lang === 'zh-HK') ? voice : voices.find(voice => voice.lang === 'zh-HK');\n                      } }\n                    >\n                      \n                    </SayButton>\n                  </li>\n                  <li>\n                    <SayButton\n                      speak=\"\"\n                      voice={ voices => {\n                        const voice = voices.find(({ voiceURI }) => voiceURI === state.selectedVoiceURI);\n\n                        return (voice && voice.lang === 'ja-JP') ? voice : voices.find(voice => voice.lang === 'ja-JP');\n                      } }\n                    >\n                      \n                    </SayButton>\n                  </li>\n                </ul>\n              </article>\n            </section>\n            <section className=\"queue\">\n              <article>\n                <header>\n                  <h1>Queue</h1>\n                </header>\n                { state.queued.length ?\n                    <ul>\n                      { state.queued.map(({ id, pitch, rate, text }) =>\n                        <li key={ id }>\n                          <button onClick={ this.handleRemoveFromQueue.bind(null, id) }>&times;</button>&nbsp;\n                          <span>{ text }</span>\n                          <Say\n                            onEnd={ this.handleSayEnd.bind(null, id) }\n                            pitch={ pitch }\n                            rate={ rate }\n                            speak={ text }\n                            voice={ voices => voices.find(({ voiceURI }) => voiceURI === state.selectedVoiceURI) || voices.find(({ lang }) => lang === window.navigator.language) }\n                          />\n                        </li>\n                      ) }\n                    </ul>\n                  :\n                    <div>Nothing queued</div>\n                }\n              </article>\n              <article>\n                <header>\n                  <h1>Available voices</h1>\n                </header>\n                <select\n                  onChange={ this.handleSelectedVoiceChange }\n                  value={ state.selectedVoiceURI }\n                >\n                  <option>Browser language default ({ window.navigator.language })</option>\n                  { voices.map(({ lang, name, voiceURI }) =>\n                    <option key={ voiceURI }value={ voiceURI }>{ `[${ lang }] ${ name || voiceURI }` }</option>\n                  ) }\n                </select>\n              </article>\n              <article>\n                <header>\n                  <h1>Other services</h1>\n                </header>\n                <form onSubmit={ this.handleBingSpeechKeySubmit }>\n                  <p>\n                    <label>\n                      Bing Speech key\n                      <input\n                        onChange={ this.handleBingSpeechKeyChange }\n                        type=\"text\"\n                        value={ state.bingSpeechKey }\n                      />\n                      <button\n                        onClick={ this.handleClearBingSpeechKey }\n                        type=\"button\"\n                      >\n                        &times;\n                      </button>\n                    </label>\n                  </p>\n                  <p>\n                    <button>Save</button>\n                  </p>\n                </form>\n              </article>\n            </section>\n          </div>\n        }\n      </Composer>\n    );\n  }\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'core-js/modules/es6.array.find';\nimport 'url-search-params-polyfill';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _memoizeOne = require('memoize-one');\n\nvar _memoizeOne2 = _interopRequireDefault(_memoizeOne);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Context = require('./Context');\n\nvar _Context2 = _interopRequireDefault(_Context);\n\nvar _Utterance = require('./Utterance');\n\nvar _Utterance2 = _interopRequireDefault(_Utterance);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar SpeechContext = function () {\n  function SpeechContext(ponyfill) {\n    (0, _classCallCheck3.default)(this, SpeechContext);\n    this.queueWithCurrent = [];\n    this.cancel = this.cancel.bind(this);\n    this.cancelAll = this.cancelAll.bind(this);\n    this.speak = this.speak.bind(this);\n    this.setPonyfill(ponyfill);\n  }\n\n  (0, _createClass3.default)(SpeechContext, [{\n    key: 'setPonyfill',\n    value: function setPonyfill(_ref) {\n      var speechSynthesis = _ref.speechSynthesis,\n          SpeechSynthesisUtterance = _ref.SpeechSynthesisUtterance;\n      this.ponyfill = {\n        speechSynthesis: speechSynthesis,\n        SpeechSynthesisUtterance: SpeechSynthesisUtterance\n      };\n    }\n  }, {\n    key: 'cancel',\n    value: function () {\n      var _ref2 = (0, _asyncToGenerator3.default)(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee(id) {\n        var index;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                index = this.queueWithCurrent.findIndex(function (utterance) {\n                  return utterance.id === id;\n                });\n\n                if (!~index) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt('return', this.queueWithCurrent[index].cancel());\n\n              case 3:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function cancel(_x) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return cancel;\n    }()\n  }, {\n    key: 'cancelAll',\n    value: function () {\n      var _ref3 = (0, _asyncToGenerator3.default)(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee2() {\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function cancelAll() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return cancelAll;\n    }()\n  }, {\n    key: 'speak',\n    value: function speak(utteranceLike) {\n      // console.debug(`QUEUED: ${ utteranceLike.text }`);\n      if (utteranceLike.id && this.queueWithCurrent.find(function (_ref4) {\n        var id = _ref4.id;\n        return id === utteranceLike.id;\n      })) {\n        // Do not queue duplicated speak with same unique ID\n        // console.debug('NOT QUEUEING DUPE');\n        return;\n      }\n\n      var utterance = new _Utterance2.default(utteranceLike);\n      this.queueWithCurrent = [].concat((0, _toConsumableArray3.default)(this.queueWithCurrent), [utterance]);\n\n      if (this.queueWithCurrent.length === 1) {\n        this._next();\n      }\n\n      return utterance.deferred.promise;\n    }\n  }, {\n    key: '_next',\n    value: function _next() {\n      var _this = this;\n\n      var utterance = this.queueWithCurrent[0];\n\n      if (!utterance) {\n        return;\n      }\n\n      var id = utterance.id;\n      var promise = utterance.speak(this.ponyfill);\n      promise.then(function () {\n        _this.queueWithCurrent = _this.queueWithCurrent.filter(function (utterance) {\n          return utterance.id !== id;\n        });\n\n        _this._next();\n      }, function () {\n        // TODO: If the error is due to Safari restriction on user touch\n        //       The next loop on the next audio will also fail because it was not queued with a user touch\n        _this.queueWithCurrent = _this.queueWithCurrent.filter(function (utterance) {\n          return utterance.id !== id;\n        });\n\n        _this._next();\n      });\n    }\n  }]);\n  return SpeechContext;\n}();\n\nvar Composer = function (_React$Component) {\n  (0, _inherits3.default)(Composer, _React$Component);\n\n  function Composer(props) {\n    (0, _classCallCheck3.default)(this, Composer);\n\n    var _this2 = (0, _possibleConstructorReturn3.default)(this, (Composer.__proto__ || (0, _getPrototypeOf2.default)(Composer)).call(this, props));\n\n    _this2.handleVoicesChanged = _this2.handleVoicesChanged.bind(_this2);\n    var voices = [];\n\n    if (props.speechSynthesis) {\n      props.speechSynthesis.addEventListener && props.speechSynthesis.addEventListener('voiceschanged', _this2.handleVoicesChanged);\n      voices = props.speechSynthesis.getVoices();\n    }\n\n    _this2.mergeContext = (0, _memoizeOne2.default)(function (_ref5, voices) {\n      var cancel = _ref5.cancel,\n          speak = _ref5.speak;\n      return {\n        cancel: cancel,\n        speak: speak,\n        voices: voices\n      };\n    });\n    _this2.state = {\n      context: new SpeechContext({\n        speechSynthesis: props.speechSynthesis,\n        SpeechSynthesisUtterance: props.speechSynthesisUtterance\n      }),\n      voices: voices\n    };\n    return _this2;\n  }\n\n  (0, _createClass3.default)(Composer, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var props = this.props;\n      var changed = ['speechSynthesis', 'speechSynthesisUtterance'].some(function (name) {\n        return nextProps[name] !== props[name];\n      });\n\n      if (changed) {\n        if (props.speechSynthesis) {\n          props.speechSynthesis.removeEventListener && props.speechSynthesis.removeEventListener('voiceschanged', this.handleVoicesChanged);\n        }\n\n        this.state.context.setPonyfill({\n          speechSynthesis: nextProps.speechSynthesis,\n          SpeechSynthesisUtterance: nextProps.speechSynthesisUtterance\n        });\n        var nextVoices = [];\n\n        if (nextProps.speechSynthesis) {\n          nextProps.speechSynthesis.addEventListener && nextProps.speechSynthesis.addEventListener('voiceschanged', this.handleVoicesChanged);\n          nextVoices = nextProps.speechSynthesis.getVoices() || [];\n        }\n\n        this.setState(function () {\n          return {\n            voices: nextVoices\n          };\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var speechSynthesis = this.props.speechSynthesis;\n      speechSynthesis && speechSynthesis.removeEventListener && speechSynthesis.removeEventListener('voiceschanged', this.handleVoicesChanged);\n    }\n  }, {\n    key: 'handleVoicesChanged',\n    value: function handleVoicesChanged(_ref6) {\n      var target = _ref6.target;\n      this.setState(function () {\n        return {\n          voices: target.getVoices()\n        };\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var props = this.props,\n          state = this.state;\n      var children = props.children;\n      return _react2.default.createElement(_Context2.default.Consumer, null, function (context) {\n        return context ? typeof children === 'function' ? children(context) : children : _react2.default.createElement(_Context2.default.Provider, {\n          value: _this3.mergeContext(state.context, state.voices)\n        }, typeof children === 'function' ? _react2.default.createElement(_Context2.default.Consumer, null, function (context) {\n          return children(context);\n        }) : children);\n      });\n    }\n  }]);\n  return Composer;\n}(_react2.default.Component);\n\nexports.default = Composer;\nComposer.defaultProps = {\n  speechSynthesis: window.speechSynthesis || window.webkitSpeechSynthesis,\n  speechSynthesisUtterance: window.SpeechSynthesisUtterance || window.webkitSpeechSynthesisUtterance\n};\nComposer.propTypes = {\n  speechSynthesis: _propTypes2.default.any,\n  speechSynthesisUtterance: _propTypes2.default.any\n};"],"sourceRoot":""}